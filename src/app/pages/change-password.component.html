<div class="body">
  <div class="container d-flex justify-content-center align-items-center vh-100">
    <div class="login-container">
      <h2 class="text-success text-center mb-3 h2">
        Change Password
      </h2>
      <hr />

      <div *ngIf="alertMessage" class="alert alert-{{alertType}}" role="alert">
        {{alertMessage}}
      </div>

      <ng-container *ngIf="!emailVerified && !showEmailLoader">
        <form (submit)="handleEmailSubmit()">
          <div class="mb-3">
            <label class="l1">Email</label>
            <input
              type="email"
              name="email"
              class="form-control mt-2"
              placeholder="example@gmail.com"
              [(ngModel)]="email"
              autocomplete="off"
              autocapitalize="words"
              autocorrect="off"
              [spellcheck]="false"
              required
            />
          </div>
          <button type="submit" class="btn7 fw-bold w-100 rounded">
            Verify Email
          </button>
        </form>
      </ng-container>

      <ng-container *ngIf="showEmailLoader">
        <div class="text-center mt-4">
          <div class="spinner-border text-success" role="status"></div>
          <p class="mt-2">Verifying Email... {{emailCountdown}}</p>
        </div>
      </ng-container>

      <ng-container *ngIf="emailVerified && !showRedirectLoader">
        <form (submit)="handlePasswordChange()">
          <div class="mb-2">
            <label class="mb-2 l1">New Password</label>
            <input
              type="password"
              name="newPassword"
              class="form-control"
              [(ngModel)]="newPassword"
              placeholder="********"
              required
            />
          </div>
          <div class="mb-3">
            <label class="mb-2 l1">Confirm Password</label>
            <input
              type="password"
              name="confirmPassword"
              class="form-control"
              [(ngModel)]="confirmPassword"
              placeholder="********"
              required
            />
          </div>
          <button type="submit" class="btn7 fw-bold w-100 rounded">
            Change Password
          </button>
        </form>
      </ng-container>

      <ng-container *ngIf="showRedirectLoader">
        <div class="text-center mt-4">
          <div class="spinner-border text-success" role="status"></div>
          <p class="mt-2">Please Wait {{redirectCountdown}}...</p>
        </div>
      </ng-container>
    </div>
  </div>
</div>
